/*
 * This file was generated by the Gradle 'init' task.
 */

plugins {
    id 'java-library'
    id 'maven-publish'
}

repositories {
    mavenLocal()
    mavenCentral()
    maven {
        url "https://jitpack.io"
    }
    maven {
        url = uri('https://repo.maven.apache.org/maven2/')
}
    }

dependencies {
    implementation 'dev.javatools:json-utils:1.0.1'
	//implementation 'com.googlecode.google-api-translate-java:google-api-translate-java:0.92'
    implementation 'org.json4s:json4s-native-core_3:4.1.0-M3'
    implementation group: 'com.googlecode.json-simple', name: 'json-simple', version: '1.1'
    implementation 'org.apache.httpcomponents:httpclient:4.5.14'
    implementation 'com.formdev:flatlaf:3.2.5'
    implementation 'commons-codec:commons-codec:1.16.0'
    implementation 'com.formdev:flatlaf-intellij-themes:3.2.5'
    implementation 'net.sf.jasperreports:jasperreports:6.21.2'
    implementation 'commons-io:commons-io:2.18.0'
    
    testImplementation 'org.mockito:mockito-core:3.9.0'
}

group = 'com.lariflix'
version = '1.0-SNAPSHOT'
description = 'JEMM - Jellyfin Easy Metadata Manager'
java.sourceCompatibility = JavaVersion.VERSION_21

publishing {
    publications {
        maven(MavenPublication) {
            from(components.java)
        }
    }
}

tasks.withType(JavaCompile) {
    options.encoding = 'UTF-8'
}

tasks.withType(Javadoc) {
    options.encoding = 'UTF-8'
}

task fatJar(type: Jar) {
    archiveFileName = 'jemm_runnable-jar-with-dependencies.jar'
    duplicatesStrategy = DuplicatesStrategy.EXCLUDE
    manifest {
        attributes 'Main-Class': 'com.lariflix.jemm.Jemm'
    }
    from { configurations.runtimeClasspath.collect { it.isDirectory() ? it : zipTree(it) } }
    with jar
}